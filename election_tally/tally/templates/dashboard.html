<!DOCTYPE html>
<html>
<head>
    <title>Superuser Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-4">
    <h1>Superuser Dashboard</h1>

    <!-- Alerts (if any) -->
    {% if alerts %}
    <div class="alert alert-warning">
        <ul>
            {% for alert in alerts %}
            <li>{{ alert }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    <!-- Overall Election Performance -->
    <div class="card mb-4">
        <div class="card-header">
            Overall Election Performance
        </div>
        <div class="card-body">
            <h4>Total Votes Counted: {{ total_votes }}</h4>
            <h5>Votes by Candidate</h5>
            <!-- Matplotlib chart image for votes by candidate -->
            <img src="data:image/png;base64,{{ chart_image }}" alt="Votes Chart" class="img-fluid">
        </div>
    </div>

    <!-- Subcounty & Polling Station Overview -->
    <div class="card mb-4">
        <div class="card-header">
            Subcounty & Polling Station Overview
        </div>
        <div class="card-body">
            <!-- Matplotlib chart image for subcounty performance -->
            <img src="data:image/png;base64,{{ subcounty_chart_image }}" alt="Subcounty Overview Chart" class="img-fluid">
            <hr>
            {% for subcounty, data in subcounty_performance.items %}
            <h5>Subcounty: {{ subcounty }} ({{ data.submitted }} / {{ data.total }} submitted)</h5>
            <ul>
                {% for ps in data.results %}
                <li>{{ ps.name }} - {{ ps.status }}</li>
                {% endfor %}
            </ul>
            {% endfor %}
        </div>
    </div>

    <!-- Real-time Results (Latest 10) -->
    <div class="card mb-4">
        <div class="card-header">
            Real-time Results (Latest 10)
        </div>
        <div class="card-body">
            <ul>
                {% for result in latest_results %}
                <li>{{ result.polling_station.name }} - {{ result.candidate.name }}: {{ result.votes }} votes at {{ result.timestamp }}</li>
                {% endfor %}
            </ul>
        </div>
    </div>

    <!-- Agent Monitoring -->
    <div class="card mb-4">
        <div class="card-header">
            Agent Monitoring
        </div>
        <div class="card-body">
            <table class="table">
                <thead>
                    <tr>
                        <th>Agent</th>
                        <th>Results Submitted</th>
                        <th>Corrections Made</th>
                        <th>Polling Stations Covered (%)</th>
                    </tr>
                </thead>
                <tbody>
                    {% for agent in agent_stats %}
                    <tr>
                        <td>{{ agent.agent }}</td>
                        <td>{{ agent.submitted }}</td>
                        <td>{{ agent.corrections }}</td>
                        <td>{{ agent.coverage }}%</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- Additional Graphs and Charts (if any) -->
    <div class="card mb-4">
        <div class="card-header">
            Additional Graphs and Charts
        </div>
        <div class="card-body">
            <!-- Add more charts or graphs if necessary -->
        </div>
    </div>
</div>
</body>
</html>